# 基于 DDH 的私有交集求和协议实现
## 项目概述
本项目实现了一个基于决策 Diffie-Hellman（DDH）假设的私有交集求和（Private Intersection Sum）协议。该协议允许两个参与方在不泄露各自私有数据的前提下，计算双方标识符集合的交集，并求出交集对应数值的总和。

协议的核心价值在于：

参与方 1 仅知道自己的标识符集合
参与方 2 仅知道自己的（标识符 - 数值）对集合
双方最终仅能获得交集的总和，而不会泄露非交集数据或单个数值

## 核心组件说明
### 1. DDHPrivateIntersectionSum 类
协议的基础组件，提供群运算和哈希功能：

基于大质数群（默认使用安全质数 2147483647）
实现哈希函数 hash_function：将字符串标识符映射到群元素
提供模幂运算 mod_exp：实现高效的群元素指数运算
生成随机指数 generate_random_exponent：用于参与方的私有密钥生成
### 2. AdditiveHomomorphicEncryption 类
简化的加法同态加密方案：

支持加密、解密操作
核心特性：支持对加密数值直接进行加法运算（同态性）
注意：本实现为演示用，实际应用需使用 Paillier 等成熟方案
### 3. Party1 类
参与方 1 的实现（持有标识符集合）：

round1：对自身标识符进行哈希和指数运算，发送给参与方 2
round3：接收参与方 2 的数据，计算交集并通过同态加密求和
### 4. Party2 类
参与方 2 的实现（持有（标识符 - 数值）对集合）：

生成同态加密密钥对
round2：处理参与方 1 的数据，同时对自身数据进行处理并加密数值
decrypt_final_result：解密最终的交集和
协议执行流程
Setup 阶段：
参与方 2 生成同态加密密钥对，并将公钥共享给参与方 1
第一轮交互：
参与方 1 对自身所有标识符进行哈希处理，并用私有密钥进行指数运算
将处理结果打乱顺序后发送给参与方 2
第二轮交互：
参与方 2 用自身私有密钥处理收到的数据
同时对自身的（标识符 - 数值）对进行处理：哈希标识符并指数运算，加密对应数值
将处理结果打乱顺序后发送给参与方 1
第三轮交互：
参与方 1 通过双方密钥运算结果匹配交集
利用同态加密的加法特性计算交集对应数值的加密总和
将加密总和发送给参与方 2
结果解密：
参与方 2 解密得到最终的交集总和
## 使用方法
### 运行示例
直接执行脚本即可运行协议演示：
```
bash python project6.py
```

## 运行结果：
<img width="400" height="133" alt="result" src="https://github.com/MY0495/SDU_Summer_innovation_and_entrepreneurship_practice/blob/main/project6/project6.png" />
## 安全特性
### 隐私保护：
参与方 1 无法获取参与方 2 的非交集标识符及对应数值
参与方 2 无法获取参与方 1 的非交集标识符
双方均无法获取对方的私有密钥
### 安全性基础：
基于 DDH 假设保证群运算的安全性
同态加密确保求和过程中数值的保密性
数据打乱机制防止通过顺序推断信息
## 注意事项
本实现为演示用，使用了简化的加密方案和参数
实际生产环境中应使用更大的质数、更安全的加密算法（如 Paillier）
需根据具体应用场景进行安全性评估和优化
